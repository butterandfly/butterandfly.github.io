{"title":"USE标记（翻译）","createDate":"2015-04-21","url":"data/2015-04-21-gentoo-trans-01.json","content":"```\n原文：https://wiki.gentoo.org/wiki/Handbook:X86/Working/USE\n```\n\n## 什么是USE标记\n\n### USE标记的理念\n\n当安装gentoo（或其他linux发行版，甚至其他操作系统）时，用户会根据不同的工作环境而做出不同的选择。一个服务器的设置不同与工作站。一个游戏工作站的设置也不同与3d渲染的工作站。\n\n这不仅仅包括选择安装什么包，而且包括当前包要支持什么特性。如果不需要OpenGL，那为什么要安装及维护OpenGL和建立其他包对OpenGL的支持呢？如果用户不想用kde，那为什么要编译他们完全不需要的KDE支持呢？\n\n为了帮助用户决定什么是需要安装/激活的，Gentoo希望通过一个简单的方式让用户指定他的环境。这会迫使用户决定他们真正需要的，同时减轻portage的负担。\n\n### 一个USE标记的定义\n\n输入一个USE标记。这标记是一个能体现当前情景的支持与依赖信息的关键字。如果定义了一个当前USE标记，portage会知道用户希望该USE标记能得到支持。当然这也改变了包的依赖信息。\n\n看一下这个例子：kde关键字。如果该关键字不在USE变量里，所有能可选地支持kde的包在编译时都不会包含kde支持。所有可选地有kde依赖的包在安装时都不会安装kde相关的库。而当kde关键字被定义后，上述情况则会相反。\n\n正确地定义关键字，来为用户明确地定制系统。\n\n### 有哪些USE标记（补）\n\n## 使用USE标记\n\n### 声明永久的USE标记\n\n如上文提到的，所有USE标记都声明在USE变量内。为了让用户更方便地查找和选择USE标记，我们已经提供了默认的USE设置。该设置包含了所有我们认为对一般用户会有用的USE标记。这个默认设置作为profile的一部分声明在了“make.defaults”文件内。\n\n被当前系统监听的profile，由“/etc/portage/make.profile”链接来指向。每个profile都作用在其他profile上，所以最后结果就是所有profile的集合。顶层的profile是\"base profile\"（/usr/portage/profiles/base）。\n\n查看当前激活的USE标记（所有的），可以使用`emerge --info`：\n\n```\nroot #emerge --info | grep ^USE\nUSE=\"a52 aac acpi alsa branding cairo cdr dbus dts ...\"\n```\n\n如你看到的，这个变量已经包含了非常多的关键字。但不要改变任何的“make.defaults”文件来修改USE变量：这些文件的修改会在portage树升级的时候被忽略掉！\n\n你应该从USE变量中添加或移除关键字，来改变默认设置。这通过全局定义在“/etc/portage/make.conf”中的USE变量来完成。在这变量中你可以添加额外的USE标记，或删除不再使用的USE标记。后者（删除标记）通过对关键字添加前缀“-”来完成。\n\n例如，删除KDE和QT的支持但添加ldap，可以在“/etc/portage/make.conf”中定义下面这段USE：\n\n```\nUSE=\"-kde -qt4 ldap\"\n```\n\n### 为单独的包声明USE标记\n\n有时候用户希望声明一个作用于一个（或一些）应用程序的临时USE标记，但非作用于整个系统。此时你可以修改“/etc/portage/package.use”来达到这目的。这通常是一个单独的文件，但也可以是一个目录；查看`man portage`的到更多的信息。下面这例子假设package.use是一个文件。\n\n例如，只对mysql添加herkdb支持：\n\n```\ndev-db/mysql berkdb\n```\n\n类似的，我们可以机智地为当前应用取消USE标记。例如，关闭php内的java支持（但不影响其他包）：\n\n```\ndev-php/php -java\n```\n\n### 声明临时的USE标记\n\n有时候用户需要为一个极短的时间段设置USE标记。声明USE变量作为环境变量，这样可以避免对“/etc/portage/make.conf”做两次修改（修改及取消修改）。记住这种设置只应用在命令的入口——从新安装或更新应用（无论是明确地，或作为系统更新的一部分）会取消由USE标记（临时）的定义而触发的修改。\n\n下面这例子会临时地从USE设置中移除java来安装seamonkey：\n\n```\nroot #USE=\"-java\" emerge seamonkey\n```\n\n### 优先级"}